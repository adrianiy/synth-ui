import { html } from 'lit-html';
import { Meta, Description, Canvas, Story } from '@storybook/addon-docs/blocks';
import notes from './readme.md';
export const limit = 3;

export const Template = (args) => html`<div style="width: 300px;"><glyph-list .data=${args.data} limit=${args.limit} loading=${args.loading} enable-download=${args.enableDownload} expandable=${args.expandable} /> </div>`;

<Meta
    title="Components/List"
    parameters={{ viewMode: 'docs' }}
/>

###### glyph-list
# List

Paginated list component.

## Basic list

<Canvas>
    <Story
    name="Basic"
    args={{ data, limit, loading: false, enableDownload: true, expandable: false }}>{Template.bind({})}</Story>
</Canvas>

> ### Keep in mind
>
> -   Row fields preffixed with `_` are private properties used internally but never rendered.
> -   First row will always be visible
> -   When `view more` is active, pagination is hidden
> -   Rows are sortable `asc` or `desc` style.
>     -   **Total** will always be the first row.
>     -   The default sort value is conserved on first load
> - You can allow users to download data setting `enableDownload` to `true`.

<br/>

## With actions

Rows accept `_actions` attribute that will render a floating button on the right side of the list.

This button trigger `action.action` on click.

<Canvas>
    <Story
    name="With actions"
    args={{ data: actionData, limit, loading: false, expandable: false }}>{Template.bind({})}</Story>
</Canvas>

## With children

Rows can have children data that will be displayed on row expand.

<Canvas>
    <Story
    name="With children"
    args={{ data: childrenData, limit, loading: false, expandable: true }}>{Template.bind({})}</Story>
</Canvas>

### Loading list

<Canvas>
    <Story name="Loading" args={{ data, limit, loading: true }}>{Template.bind({})}</Story>
</Canvas>

## No data list

<Canvas>
    <Story name="No data" args={{ data: [], loading: false }}>{Template.bind({})}</Story>
</Canvas>

---

<Description>
    { notes }
</Description>

export const data = [
    {
        _isTotal: true,
        name: 'total',
        amount: { value: 98123122, format: '0,0' },
        growth: { value: 0.9, format: '0,0.0%', decoration: 'red' },
    },
].concat([ 'España', 'Estados unidos', 'Canada', 'Francia', 'Irlanda', 'Croacia', 'Corea', 'Taiwan' ].map((name, i) => (
    {
        _isTotal: false,
        name,
        amount: { value: Math.random() * 100000, format: '0,0' },
        growth: { value: Math.random() * (i % 2 ? -1 : 1),format: '0,0.0%', decoration: 'red' },
    }
)));

export const childrenData = [
    {
        _isTotal: true,
        name: 'total',
        amount: { value: 98123122, format: '0,0' },
        growth: { value: 0.9, format: '0,0.0%', decoration: 'red' },
        _children: [
        {
            _loading: true,
        },
        {
            _loading: true,
        }
        ]
    },
].concat([ 'España', 'Estados unidos', 'Canada', 'Francia', 'Irlanda', 'Croacia', 'Corea', 'Taiwan' ].map((name, i) => (
    {
        _isTotal: false,
        name,
        amount: { value: 11111, format: '0,0' },
        growth: { value: 0.2 * (i % 2 ? -1 : 1),format: '0,0.0%', decoration: 'red' },
        _children: [
        {
            _isTotal: false,
            name: 'CHILD',
            amount: { value: 11111, format: '0,0' },
            growth: { value: 0.2 * (i % 2 ? -1 : 1),format: '0,0.0%', decoration: 'red' },
        }
        ]
    }
)));
export const actionData = [
    {
        _isTotal: true,
        name: 'total',
        amount: { value: 98123122, format: '0,0' },
        growth: { value: 0.9, format: '0,0.0%', decoration: 'red' },
    },
].concat([ 'España', 'Estados unidos', 'Canada', 'Francia', 'Irlanda', 'Croacia', 'Corea', 'Taiwan' ].map((name, i) => (
    {
        _isTotal: false,
        _actions: i % 2
            ? [ { icon: 'bar_chart', title: 'Analize', action: () => alert('action') } ]
            : [{ icon: 'bar_chart', title: 'Analize', action: () => alert('analyze') },{ icon: 'lightbulb', title: 'Insights', action: () => alert('insight') }],
        name,
        amount: { value: 11111, format: '0,0' },
        growth: { value: 0.2 * (i % 2 ? -1 : 1),format: '0,0.0%', decoration: 'red' },
    }
)));
