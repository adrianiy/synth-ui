import { Meta, Story } from '@storybook/addon-docs';
import { WithGlobalTheme } from '../helpers/decorators';

<Story name="Getting Started" decorators={[ WithGlobalTheme ]} />

<Meta title="Getting Started" parameters={{ viewMode: 'docs' }}/>

###### Glyph-React
# Getting Started

<Story name="Install" />

## Install

```bash
# yarn
yarn add glyph-react

# npm
npm i glyph-react
```

<Story name="React" />

## React

To use this React library you'll need to follow these simple steps:

-  Call setup method in main file.

```javascript
// main.js

import { setup } from 'glyph-react-poc';

setup();
```

-  Import main css folder to include css variables and style components

```css
# theme.css or main.css

@import "glyph-components/dist/glyph-components/glyph-components";
```

-  Execute `yarn build` script to copy assets in static folder

```bash
yarn build
```

-  Use glyph-components wherever you like to.

```javascript
import { GlyphReactList } from 'glyph-react-poc';

...

    return (
        <div className="App">
            <div className="list">
                <GlyphReactList title={'List'} limit={3} data={data} fieldsConfig={fieldsConfig} />
            </div>
        </div>
    );
...
```

<Story name="Amiga FWK"/>

### AMIGA-FWK

- Install `copy-webpack-plugin`.

```bash
yarn copy-webpack-plugin
```

- Import assets dir from `node_modules/glyph_react/dist/assets` in your local assets.

```javascript
// amiga FWK (webpack 4)

const copyPlugin = require('copy-webpack-plugin');

...

    plugins: [
        new copyPlugin({
            patterns: [
                { from: projectPath('node_modules/glyph_react/dist/assets'), to: 'assets' }
            ]
        }),
        ...
    ]
...
```

- Execute `yarn build` in frontend folder

```bash
yarn build
```

-  Call setup method in main file.

> This allows React to use **custom elements**

```javascript
// main.js

import { setup } from 'glyph-react-poc';

setup();
```

- To Style components you must use [StyleProvider](?path=/docs/react_providers-styles--styles-provide).

> Global variables cannot be imported in CSS files because amiga fwk minificates these values and shadowed components will not be styled.


- To use filters in your application you can use [Filters Provider](?path=/docs/react_providers-filters--filters).


- If your application uses a context-path probably you'll need to use `basePath` property in your components to fix local assets loading.

This is an example of application using `glyph-react`.

```javascript
import {
    Brands
    GlyphHeader,
    GlyphReactChipsbar,
    UIInterface,
    useGlyphStyle,
} from "glyph-react";

const main = () => {
    const { glyphInterface, glyphTheme, setGlyphInterface, setGlyphTheme } = useGlyphStyle();
    ....

    return (
        <>
            <GlyphHeader
                locale={currentLocale}
                brand
                basePath="/drfrwrhs/web"
                appTitle="DRIVE"
                appSubtitle="WAREHOUSES"
                share
                menu
                avatar
                showBrands={false}
                brandList={[]}
                userData={user}
                appData={getVisibleScreens(user, menuQuery.data)}
                interface={glyphInterface}
                activeBrand={Brands.zara}
                className={classes.Layout_header}
                userMenuConfig={{
                    interface: glyphInterface,
                    languages,
                    customConfig: inAnyRole(["Drive.Administrator"]),
                    themes,
                }}
                onLangChange={handleLangChange}
                onThemeChange={theme => setGlyphTheme(theme)}
                onLogout={logOut}
            />
            <GlyphReactChipsbar
                locale={currentLocale}
                i18n={messages[currentLocale]}
                basePath="/drfrwrhs/web"
                uiInterface={glyphInterface}
            />
        </>
    );
}

```

<Story name="Local" />

## Local Development

Execute

```bash
yarn react start:docs
```

You'll have react docs available on port *6009*.

### Using demo playground

To use react playground correctly you'll need to simulate a real-world installation. In order to do this you'll nedd to link `peerDependencies` from *react-demo* to *glyph-react*.

Execute these commands

```bash
cd packages/react-demo/node_modules/react
yarn link
cd ../react-dom
yarn link
cd ../react-redux
yarn link
cd ../redux
yarn link
cd ../../../glyph-react
yarn link react react-dom react-redux redux
```

Now you can run the playground! Happy coding!

```bash
yarn react start
```

You'll have a react application running on port *3000*
